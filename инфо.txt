ссылка на битбакет BitBucket   https://sbtatlas.sigma.sbrf.ru/stashdbo/projects/DBO/repos/sbbol/browse/README.MD

#БЧ
Пользователь в БЧ - NovikovAI 12345

#Плечо #Плечи
Плечо - база данных. Так как данных очень много, то их разбили на 2 базы данных (на 2 плеча). Например, при запросах
в compliance осуществляется поиск организации сначала в 1ом плече, если организация не найдена, то выбрасывается
Exception, который отлавиливается методом, который перекидывает поиск организации на 2ое плечо

#создание_таблицы #новые_таблицы #патчи
При создании нового патча в корне проекта (папка sbbol) необходимо указать команду  ./gradlew newpatch -Ppatchname=InsertToTheEntites -Pauthor=ArtemNovikov -Pdescr="Добавление сущности при создании таблицы блокировок по задаче TEAM360-216" -Pmode=dml
сделать jooq Generate и закоммитить новые файлы

#git #заливка
1. отпочковался от релиза 33.000.00  git br -b имя_ветки
2. git st
3. вернул файлы которых нехватает git co config/propertyValues.yml
4. решил задачу и сделал коммит git commit -m "TEAM360-216: добавлена новая таблица ORG_CNTR_COMP_BLOCK_HIST"
5. 
Важно! Обратите внимание.
- Для DML скриптов обратную миграцию можно не писать, если не делаете commit внутри скрипта. Скрипт выполняется в одной транзакции, и в случае ошибки будет откат транзакции.
- Если в файле обратной миграции ничего нет, то не надо делать и сам файл.


#gitlog
./gradlew updateMain --debug 1>log.txt 2>&1

#сравнениеGit #compareWithBranch #сравнить
Открываем файл в идее, по вкладке этого файла правой кнопкой кликаем --> Git --> Compare with branch выбираем ветку и внимательно проверяем, относятся ли изменения к моим фактическим изменениям, если нет, то возвращаем из эталонной ветки

#схлопываниемКоммитов #схлопунть
git rebase -i HEAD~<количество комитов от текущего, включая его самого>

#откатСозданнойТаблицыDataGrip #DataGrip
-) Чистим DB_Update
-) Выполняем скрипты отката с КОММИТОМ!!!!
-) Удаляем записи из Entities (желательно скриптом отката для Entities)

#сокращения
КСШ - Корпоративная сервисная шина
ТФС - 
FCCM - https://sbtatlas.sigma.sbrf.ru/wiki тут можно почитать, но пока всё равно не понятно(06.03.2019)
СББОЛ - сбербанк бизнес онлайн
код Тербанка - код территориального подразделения банка

#vim
i - режим ввода текста
esc - возврат в командный режим
:w - создать новый документ или записать изменения в текущем документы
:q - выйти из vim
:wq - зписать и выйти
hjkl - h влево, j вниз, k вверх, l вправо 
А - переводит курсор в конец строки
о - создаёт строку ниже текущей и перемещает курсор на неё
О - создаёт строку выше  текущей и перемещает курсор на неё
gg - переходим в начало файла
G - переходим в конец файла
w - на слово вперед перекидывает
4w - 4 раза подряд на слово вперед перекидывает 
f3 - переходит к следубщему символу 3
/ура - ищем слово ура вниз от текущего положения курсора
?ура - ищем слово ура вверх от текущего положения курсора
v - режим выделения
d - удаление выделенного
x - удаление выделенного и сохранение его в буфере обмена
p - вставить из буфера справа от курсора
P - вставить из буфера слева от курсора
dw - удалить слово
dd - удалить строку

#проблема
ORA-00054: ресурс занят и задано его получение с параметром NOWAIT, либо истекло время ожидания
Олег сказал, что у него тоже так было с удалённой базой, чё то глюкануло, надо просто подождать (он раз ждал пол дня), у меня висела база час (15.03.2019)

#проблема
закрытое соединение - возникает при выполнении updateMain, это проблемы с удаленной базой. просто попробовать перезапустить updateMain.

#проблема
Error occured while check db-jooq generation - скорее всего забыл после updateMain сгенерировать классы jooq. Необходимо сделать jooqGenerate, сравнить изменения файлов с эталонными из релизной ветки, лишнее отменить и затем сделать коммит с учётом новых файлов и запушить изменения.

#созданиеСправочника
https://sbtatlas.sigma.sbrf.ru/wiki/pages/viewpage.action?pageId=849021089

#аккаунтСкайп #skype
novikov.ar.ig@sberbank.ru

#логин
OUT-Novikov-ArIg